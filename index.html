<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Blacksmith</title>
    <link rel="stylesheet" type="text/css" href="css/prism.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="vendor/font-awesome/css/font-awesome.min.css">
    <script type="text/javascript" src="js/prism.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
  </head>
  <body>
    <main>

      <!-- Section :: Entry -->
      <section id="view-entry" class="view view-entry">
        <header>
          <h1>Blacksmith</h1>
          <h2>Source Code Review</h2>
        </header>
        <form class="login form-dark">
          <input placeholder="Username/Email" type="text"></input>
          <input placeholder="Password" type="password"></input>
          <a href="#" id="sign-in" class="button button-green button-100">
            Sign In <i class="fa fa-sign-in"></i></a>
        </form>
        <footer></footer>
      </section>

      <!-- Section :: Main -->
      <section id="view-main" class="view view-main">
        <div class="menu">
          <nav class="menu-left">
            <span class="logo">Blacksmith</span>
          </nav>
          <nav class="menu-right">
            <a href="#"><i class="fa fa-sign-out"></i></a>
            <a href="#"><i class="fa fa-sign-out"></i></a>
          </nav>
        </div>
        <div class="workspace">
          <div class="pane pane-column-10">
            <div class="pane-row-8">
              <div id="tree-view" class="pane pane-column-2 tree-view">
              </div>
              <div class="pane pane-column-4 code-pane">
                <nav class="code-tabs">
                  <a class="code-tab tab-active">Tab</a>
                  <a class="code-tab">Tab</a>
                  <a class="code-tab">Tab</a>
                </nav>
                <div class="code-body">
                  <pre class="line-numbers"><code class="language-scss">
@import '../modules/view-main';

.view-main {
  @include view-main;
}

.workspace {
  @include workspace;
}

.menu {
  @include menu;
}

.status-bar {
  @include status-bar;
}

.tree-view {
  @include tree-view;
}

.annotations {
  @include annotations;
}
                  </code></pre>
                </div>
              </div>
              <div class="pane pane-column-4 code-pane">
                <nav class="code-tabs">
                  <a class="code-tab tab-active">Tab</a>
                  <a class="code-tab">Tab</a>
                  <a class="code-tab">Tab</a>
                </nav>
                <div class="code-body">
                  <pre class="line-numbers" data-line><code class="language-javascript">
// Here's some Javascript

// + TreeView
//    Render tree view
//    Make tree view collapsible
function TreeView() {
  this.anchor = '#tree-view';
  this.collapsible = true;
  this.initiallyCollapsed = true;
  this.icons = {};
  this.icons.dirOpen = 'fa-folder-open';
  this.icons.dirClosed = 'fa-folder';
  this.icons.file = 'fa-file';
  this.icons.active = true;
};

TreeView.prototype.render = function() {
  var ommit = ['.git', '.sass-cache', 'node_modules', 'vendor'];
  var tree = blacksmith.renderTree('./', ommit);
  $(tree).appendTo($(this.anchor));
  if(this.icons.active) this.addIcons();
  if(this.collapsible) this.makeCollapsible();
  if(this.collapsible && this.initiallyCollapsed) this.collapseAll();
  return this;
}

TreeView.prototype.makeCollapsible = function(speed) {
  var that = this;
  if(!this.collapsible) this.collapsible = true;
  $('li a').click(function(e) {
    e.preventDefault();
    var next = $(this).parent().children('ul:first');
    if(speed == undefined) speed = 250;
    next.slideToggle(speed);
    next.parent().children('a').children('i').toggleClass(that.icons.dirClosed);
    next.parent().children('a').children('i').toggleClass(that.icons.dirOpen);
  });
  return this;
}

TreeView.prototype.collapseAll = function() {
  $('ul ul').hide();
  $(this.anchor + ' i').removeClass(this.icons.dirOpen);
  $(this.anchor + ' i').addClass(this.icons.dirClosed);
}

TreeView.prototype.addIcons = function() {
  $(".bs-file > a").prepend('<i class="fa ' + this.icons.file + '"></i>');
  $(".bs-directory > a").prepend('<i class="fa ' + this.icons.dirOpen + '"></i>');
}

TreeView.prototype.removeIcons = function() {
  $(".bs-file i, .bs-directory i").remove();
}

TreeView.prototype.remove = function() {
  $(this.anchor).html("");
  return this;
}
                  </pre></code>
                </div>
              </div>
            </div>
            <div class="pane-row-2">
              <div class="pane pane-column-10 annotations">
                Annotations pane
              </div>
            </div>
          </div>
        </div>
        <div class="status-bar">
          Status Bar
        </div>
      </section>
    </main>
  </body>
</html>
